import { existsSync, mkdirSync, writeFileSync } from 'node:fs'
import { resolve } from 'node:path'
import { exec as execCb } from 'node:child_process'

export function writeFile(file: string, data: string): void {
  const dataFolder = resolve(__dirname, '..', 'data')
  if (!existsSync(dataFolder)) {
    mkdirSync(dataFolder)
  }
  writeFileSync(resolve(dataFolder, file), data)
}

export function exec(cmd: string): Promise<string> {
  return new Promise((resolve, reject) => {
    execCb(cmd, (error, stdout, stderr) => {
      error ? reject(stderr) : resolve(stdout)
    })
  })
}

export function filterDuplicate(data: string[]): string[] {
  return data.filter((item, i, ar) => item && ar.indexOf(item) === i)
}
