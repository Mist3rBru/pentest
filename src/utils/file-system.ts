import { existsSync, mkdirSync, readFileSync, writeFileSync } from 'node:fs'
import { join, resolve } from 'node:path'

const dataFolderPath = resolve(__dirname, '..', 'data')

export function writeFile(domain: string, file: string, data: string): void {
  const domainPath = join(dataFolderPath, domain)
  if (!existsSync(domainPath)) {
    mkdirSync(domainPath, { recursive: true })
  }
  writeFileSync(join(dataFolderPath, domain, file), data)
}

export function readFile(
  domain: string,
  file: string
): Record<string, unknown> {
  return JSON.parse(readFileSync(join(dataFolderPath, domain, file)).toString())
}
